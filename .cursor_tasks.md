# Detailed Story Points for Building a Journal App

Below is a very detailed, markdown-formatted list of numbered stories with checkboxes at both the story level and each sub-step. All tasks assume the use of Next.js (App Router), React functional components, Tailwind CSS, and TypeScript strict mode. All UI elements should be build with Tailwind patterns and integrated into higher-level page components.

## 1. Journal Tagging

- [ ] 1.1 Add tags field to JournalEntry model
  Details: In the database schema (postgresql), add a tags array or many-to-many relation so each journal entry can store multiple tags.
- [ ] 1.2 Implement GET /tags endpoint
  Details: Create an endpoint that returns a list of all distinct tags or frequently used tags for autocomplete.
- [ ] 1.3 Implement tag submission in POST /entries
  Details: Accept a tags array in the request body, validate the tags, and store them in the JournalEntry model.
- [ ] 1.4 Create multi-select UI for tags in the New Entry form
  Details: Allow users to add existing tags or create new tags. Provide a "most used" or "recently used" section.
- [ ] 1.5 Display tags on journal entries
  Details: On the dashboard and journal list, show each entry's tags as clickable badges. Link to a filtered view by tag.

## 2. Better Navigation

- [ ] 2.1 Add "Previous Entry" and "Next Entry" buttons
  Details: On the journal entry detail page, display buttons that navigate to adjacent entries by date or ID.
- [ ] 2.2 Fetch or calculate adjacent entries
  Details: Create a function or endpoint (e.g., GET /entries/:id/adjacent) to determine the previous and next entries.
- [ ] 2.3 Implement a calendar/date picker (optional)
  Details: Provide a way to jump to specific dates for quick navigation. Integrate with existing routing.
- [ ] 2.4 Handle edge cases (first or last entry)
  Details: Disable or hide the previous/next buttons if there is no adjacent entry.

## 3. Add Customizable Emojis to Mood Scale

- [ ] 3.1 Extend UserSettings schema with moodEmojis
  Details: Store an array or map keyed by numeric mood values (1–10), each mapped to an emoji string.
- [ ] 3.2 Create PUT /users/:userId/settings/moodEmojis endpoint
  Details: Accept a JSON object with keys 1–10 and values as emojis. Validate the input, then update the user's settings in the database.
- [ ] 3.3 Add "Mood Emojis" section in the Settings page
  Details: For each rating (1–10), show an emoji picker or text input. Save updates to the server on submit.
- [ ] 3.4 Fetch moodEmojis on Journal Entry form
  Details: Retrieve the user's custom emojis before rendering the mood slider. Store in state or global store.
- [ ] 3.5 Display numeric value and corresponding emoji
  Details: When the user moves the slider (1–10), show the numeric rating plus the matching emoji. Use a fallback emoji if none is set.

## 4. Mood Correlations

- [ ] 4.1 Add analytics aggregator for mood vs. activities
  Details: Query journal entries, group by activity, calculate average mood. Prepare a data structure like { activity: { averageMood, count } }.
- [ ] 4.2 Add analytics aggregator for mood vs. symptoms
  Details: Similarly, group entries by symptom tags and compute average mood. Return a data structure like { symptom: { averageMood, count } }.
- [ ] 4.3 Implement GET /analytics/mood-correlations
  Details: Return both sets of correlation data (activities and symptoms) for the current user, possibly filtered by date range.
- [ ] 4.4 Display correlation charts on Analytics page
  Details: Use a chart library (e.g., Chart.js, Recharts) to visualize the correlation data. Provide separate sections or tabs for "By Activity" and "By Symptom."
- [ ] 4.5 Add date-range filters (optional)
  Details: Let users specify a start and end date to narrow the data. Pass these parameters to the endpoint and update the charts.

## 5. Entry Streak Rewards

- [ ] 5.1 Add streak fields to user model
  Details: In the User schema, add currentStreak, longestStreak, and lastEntryDate. Initialize them to default values.
- [ ] 5.2 Update streak logic on new entry creation
  Details: When a user posts a new entry, compare today's date to lastEntryDate.
    •	If consecutive, currentStreak++.
    •	Else, reset to 1.
    •	Update longestStreak if needed.
- [ ] 5.3 Display streak info on the dashboard
  Details: Show "You are on a X-day streak!" and "Longest streak: Y days." Possibly add badges or achievements for milestones.
- [ ] 5.4 Add streak-based incentives (optional)
  Details: Offer small "rewards" or motivational messages at certain streak thresholds (7, 30, 100 days).

## 6. Full-Fleshed Out Goals

- [ ] 6.1 Create a new Goal model
  Details: Fields may include: title, description, category, progress, target, dueDate, completed. Store in a separate collection/table or embed in user data.
- [ ] 6.2 Implement CRUD endpoints for goals
  Details:
    •	POST /goals: Create a new goal.
    •	GET /goals: List user's goals.
    •	PUT /goals/:goalId: Update goal details (progress, completed status).
    •	DELETE /goals/:goalId: Remove a goal.
- [ ] 6.3 Add a Goals Dashboard
  Details: Display all goals as cards with progress bars or checklists. Allow filtering by category (Health, Work, Personal, etc.).
- [ ] 6.4 Allow goal creation and editing
  Details: Provide a form to set goal details (title, description, target, category). Save via the appropriate endpoint.
- [ ] 6.5 Integrate goals with daily entries (optional)
  Details: Prompt users to reflect on goal progress or automatically update certain goals (e.g., "walk 10,000 steps") if you track relevant data.